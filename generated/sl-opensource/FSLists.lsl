// This work is licensed under a Creative Commons Attribution 3.0 Unported License (http://creativecommons.org/licenses/by/3.0/)
integer ai;string c="<none loaded>";integer ac=30;integer au;integer an;integer P;integer ae;list k;string d;integer F;list aw=["0","1","2","3","4","5","6","7","8","9"];list ag=["No|","Yes|"];list aH=[7,6];list af=[184,214,246,276,308,338,370,400];list A=[144,158,172,186,200,214,228,242];list ao=["Off","On"];list r=[0,1,2,3,4,5,6,7,8];
aJ(string w,list D){llMessageLinked(-4,12123405,w,llDumpList2String(D,"|"));}
integer T(integer R){return (ai&R)==R;}
aP(integer S){ai=ai^S;}
aO(){integer ad=llList2Integer(k,0);integer aA;P=1;if (ad==103){integer O=llList2Integer(k,2);aA=0;if (T(1024)){aA=1;if (T(2048)){aA=2;}}k=["#1 Back|12123412|0","#2 Sync|12123412|1","#3 Add dancers|12123412|2","#4 Remove dancers|12123412|3","#5 Change dancer groups|12123412|4","#6 Load notecard|12123412|5","#7 Set wait sequence menu|12123412|6","#8 Copy dances/delays|12123412|7","#9 Clear menu|12123412|8","#10 Set theme|12123412|9","#11 Set transparency|12123412|30","#12 Change HUD height|12123412|10","#13 Change HUD width|12123412|11","#14 Load all animations|12123412|27","#15 Reset|12123412|13","#16 Read Getting started|12123412|14","#17 Transfer|12123412|15","#18 Update|12123431|16"," |12123426|17","Settings (click to change):|12123426|17","#19 Dance selection:"+llList2String(["Manual|","All|","Random|"],aA)+"12123412|18","#20 Default dance duration:"+llList2String(["N/A|",(string)ac+"|",(string)ac+"|"],aA)+"12123412|19","#21 Missing dance warnings:"+llList2String(["On load notecard|","While dancing|"],T(64))+"12123412|20","#22 Keep blank lines:"+llList2String(ag,T(128))+"12123412|21","#23 Keep comment lines:"+llList2String(ag,T(256))+"12123412|22","#24 Repeat sequences:"+llList2String(["Enabled|","Disabled|"],T(512))+"12123412|23","#25 Freestyle recording:"+llList2String(["Off|","On (menu "+(string)(-305410560+an)+")|"],T(16))+"12123412|24","#26 Time animations:"+llList2String(["Off|","On|"],T(32))+"12123412|25","#27 Active menu:"+(string)(-305410560+au)+"|12123412|26"];d=llDumpList2String(k,"|||");llMessageLinked(-4,O,llDumpList2String(["ITEMS","Administrative Menu",-~-~(k!=[]),0,0,12123412],"|"),d);k=[];d="";return;}if (ad==51){ad=llList2Integer(k,1);if (-1<ad&ad<31){if (!~-ad){llMessageLinked(-4,12123402,"4","");}if (ad==2){llMessageLinked(-4,12123408,"2","12123413");return;}if (ad==3){llMessageLinked(-4,12123408,"2","12123414");return;}if (ad==4){llMessageLinked(-4,12123408,"2","12123415");return;}if (ad==5){llMessageLinked(-4,12123408,"2","12123416");return;}if (ad==20){aP(64);llMessageLinked(-4,12123401,"MISSING|"+(string)T(64),"");llMessageLinked(-4,12123402,"6",(string)T(64));llMessageLinked(-4,12123408,"2","12123412");return;}if (ad==21){aP(128);llMessageLinked(-4,12123401,"BLANK|"+(string)T(128),"");llMessageLinked(-4,12123408,"2","12123412");return;}if (ad==22){aP(256);llMessageLinked(-4,12123401,"COMMENT|"+(string)T(256),"");llMessageLinked(-4,12123408,"2","12123412");return;}if (ad==23){aP(512);llMessageLinked(-4,12123402,"7",(string)T(512));llMessageLinked(-4,12123408,"2","12123412");return;}if (ad==18){aA=0;if (T(1024)){aA=1;if (T(2048)){aA=2;}}++aA;if (2<aA){aA=0;}if (aA){if (~-aA){aP(2048);}else{aP(1024);}}else{aP(1024);aP(2048);}llMessageLinked(-4,12123402,"8",(string)T(1024));llMessageLinked(-4,12123408,"15",(string)T(2048));llMessageLinked(-4,12123408,"2","12123412");return;}if (ad==19){llMessageLinked(-4,12123406,"2",((key)"DCMSG023"));return;}if (ad==7){llMessageLinked(-4,12123408,"2","12123422");return;}if (ad==10){llMessageLinked(-4,12123408,"2","12123424");return;}if (ad==11){llMessageLinked(-4,12123408,"2","12123425");return;}if (ad==8){llMessageLinked(-4,12123408,"2","12123417");return;}if (ad==25){aP(32);llMessageLinked(-4,303181825,"8",(string)T(32));llMessageLinked(-4,12123408,"2","12123412");return;}if (ad==24){aP(16);an=au;llMessageLinked(-4,12123408,"4",(string)T(16));llMessageLinked(-4,12123408,"2","12123412");return;}if (ad==17){llMessageLinked(-4,12123408,"2","12123412");return;}if (ad==15){llMessageLinked(-4,12123408,"2","12123421");return;}if (ad==13){llMessageLinked(-4,0,"RESET","");return;}if (ad==9){llMessageLinked(-4,12123408,"2","12123420");return;}if (ad==30){llMessageLinked(-4,12123408,"2","12123432");return;}if (ad==6){llMessageLinked(-4,12123408,"2","12123418");return;}if (ad==26){llMessageLinked(-4,12123408,"2","12123427");return;}if (ad==27){llMessageLinked(-4,12123428,"6","");return;}if (ad==14){llGiveInventory(llGetOwner(),"~FS Readme - DanceHUD - Getting started");llMessageLinked(-4,12123408,"2","12123412");return;}}else{aJ("DCMSG007",(list)llList2String(k,1));}llMessageLinked(-4,12123408,"1","");return;}if (114==ad){ac=llList2Integer(k,1);llMessageLinked(-4,12123408,"2","12123412");return;}if (115==ad){au=llList2Integer(k,1);return;}}
aS(string e,integer aI,integer n){string aG;aG="2|"+e+"|1|1|0|||3|3000|||20|||";llMessageLinked(-4,aI,"SEQUENCE|"+e+"|"+(string)n,aG);}
aK(string aj){integer al=llList2Integer(k,0);integer aC=llGetInventoryNumber(20);integer h=-1;if (al==103){integer I=llList2Integer(k,1);integer ab=llList2Integer(k,2);integer a=llList2Integer(k,3);if ((!(aC<I))&-1<I){if (aC<I+a){a=aC+-I;}k=[];for(F=0;F<a;++F){d="#"+(string)(-~(F+I))+" "+llGetInventoryName(20,I+F)+"|12123411|"+(string)(I+F);k=k+d;}d=llDumpList2String(k,"|||");llMessageLinked(-4,ab,llDumpList2String(["ITEMS","Inventory animations",aC,I,1,12123411],"|"),d);k=[];d="";}else{llMessageLinked(-4,ab,llDumpList2String(["ITEMS","Inventory animations",aC,0,1,12123411],"|"),"");}return;}if (al==51){h=llList2Integer(k,1);if (-1<h&h<aC){aS(llGetInventoryName(20,h),12123402,12123411);return;}aJ("DCMSG007",(list)llList2String(k,1));llMessageLinked(-4,12123408,"2","12123411");return;}if (al==52){d=llDumpList2String(llDeleteSubList(k,0,0),"|");if (llGetSubString(d,0,0)=="#"){string L;L=llStringTrim(llGetSubString(d,1,-1),3);if (~llListFindList(aw,(list)llGetSubString(L,0,0))){h=~-(integer)L;}}if (!~h){if (20==llGetInventoryType(d)){for(al=0;al<aC&(!~h);++al){if (llGetInventoryName(20,al)==d){h=al;}}}}if (-1<h&h<aC){aS(llGetInventoryName(20,h),12123402,12123411);return;}aJ("DCMSG007",(list)d);llMessageLinked(-4,12123408,"2","12123411");}if (al==113){k=llParseString2List(aj,(list)"|",[]);h=llList2Integer(k,1);if (llList2Integer(k,0)){h=(integer)llFrand(aC);}else{++h;}if (!(h<aC)){h=0;}aS(llGetInventoryName(20,h),12123402,12123411);return;}}
aM(string v){if (llGetSubString(v,0,2)=="~FS"){aJ("NCMSG033",(list)v);return;}if ("~"==llGetSubString(v,0,0)){llMessageLinked(-4,12123409,"ZHAO_LOAD|"+v,"");if (~-P){llMessageLinked(-4,12123408,"2","12123410");}else{llMessageLinked(-4,12123408,"2","12123412");}return;}llMessageLinked(-4,12123408,"5",v);llMessageLinked(-4,12123408,"2","12123412");}
aT(){integer y=llList2Integer(k,0);integer p=llGetInventoryNumber(7);integer t=-1;if (y==103){integer N=llList2Integer(k,1);integer f=llList2Integer(k,2);integer s=llList2Integer(k,3);if ((!(p<N))&-1<N){if (-~p<N+s){s=-~(p+-N);}k=(list)("#"+(string)(-~N)+" Back|12123416|0");for(F=0;F<(~-s);++F){d="#"+(string)(-~-~(F+N))+" "+llGetInventoryName(7,N+F)+"|12123416|"+(string)(-~(N+F));k=k+d;}d=llDumpList2String(k,"|||");llMessageLinked(-4,f,llDumpList2String(["ITEMS","Load which notecard?",-~p,N,0,12123416],"|"),d);k=[];d="";}else{llMessageLinked(-4,f,llDumpList2String(["ITEMS","Load which notecard?",-~p,0,0,12123416],"|"),"");}return;}if (y==51){t=llList2Integer(k,1);if (-1<t&t<-~p){if (0<t){aM(llGetInventoryName(7,~-t));return;}}else{aJ("DCMSG007",(list)llList2String(k,1));}llMessageLinked(-4,12123408,"2","12123412");return;}if (y==52){d=llStringTrim(llDumpList2String(llDeleteSubList(k,0,0),"|"),3);if (llToUpper(d)=="BACK"){llMessageLinked(-4,12123408,"2","12123412");return;}if (llGetSubString(d,0,0)=="#"){string E;E=llStringTrim(llGetSubString(d,1,-1),3);if (~llListFindList(aw,(list)llGetSubString(E,0,0))){t=(integer)E;}}if (!~t){if (7==llGetInventoryType(d)){for(y=0;y<p&(!~t);++y){if (llGetInventoryName(7,y)==d){t=y;}}}}if (-1<t&t<p){aM(llGetInventoryName(7,t));return;}else{aJ("DCMSG007",(list)d);}llMessageLinked(-4,12123408,"2","12123412");}}
aU(){integer u=llList2Integer(k,0);string i;P=0;if (103==u){integer g=llList2Integer(k,1);integer ah=llList2Integer(k,2);integer Y=llList2Integer(k,3);if (g<10&-1<g){if (10<g+Y){Y=10+-g;}k=[];for(F=0;F<Y;++F){i=llList2String(["AO:","Next stand","Stand order:","Sit:","Sit anywhere:","Stand:","Load Notecard","Select sit","Select walk","Select ground sit"],F+g);u=llList2Integer([1,2,3,4,5,6,7,8,9,10],g+F);if (!~-u){i=i+c;}if (u==3){i=i+llList2String(["Sequential","Random"],T(2));}if (u==4){i=i+llList2String(ao,T(1));}if (u==5){i=i+llList2String(ao,T(4));}if (u==6){i=i+llList2String(ao,T(8));}d="#"+(string)(-~(F+g))+" "+i+"|12123410|"+(string)u;k=k+d;}d=llDumpList2String(k,"|||");llMessageLinked(-4,ah,llDumpList2String(["ITEMS","Animation Override Menu",10,g,0,12123410],"|"),d);k=[];d="";return;}else{llMessageLinked(-4,ah,"ITEMS|Animation Override Menu|10|0|0|12123410","");}}if (51==u){u=llList2Integer(k,1);if (1<u&u<11){if (u==2){llMessageLinked(-4,12123409,"ZHAO_NEXTSTAND","");}if (u==3){aP(2);if (T(2)){llMessageLinked(-4,12123409,"ZHAO_RANDOMSTANDS","");}else{llMessageLinked(-4,12123409,"ZHAO_SEQUENTIALSTANDS","");}}if (u==4){aP(1);if (T(1)){llMessageLinked(-4,12123409,"ZHAO_SITON","");}else{llMessageLinked(-4,12123409,"ZHAO_SITOFF","");}}if (u==5){aP(5);if (T(4)){llMessageLinked(-4,12123409,"ZHAO_SITANYWHERE_ON","");}else{llMessageLinked(-4,12123409,"ZHAO_SITANYWHERE_OFF","");}}if (u==6){aP(8);if (T(8)){llMessageLinked(-4,12123409,"ZHAO_STANDON","");}else{llMessageLinked(-4,12123409,"ZHAO_STANDOFF","");}}if (u==7){llMessageLinked(-4,12123408,"2","12123416");return;}if (u==8){llMessageLinked(-4,12123409,"ZHAO_SITS","");return;}if (u==9){llMessageLinked(-4,12123409,"ZHAO_WALKS","");return;}if (u==10){llMessageLinked(-4,12123409,"ZHAO_GROUNDSITS","");return;}}else{aJ("DCMSG007",(list)llList2String(k,1));}llMessageLinked(-4,12123408,"2","12123410");return;}if (112==u){c=llList2String(k,1);}}
aL(){integer U=llList2Integer(k,0);integer ak=9;string W;vector l;vector x;integer ap;integer az;integer J=-1;if (U==103){integer G=llList2Integer(k,1);integer B=llList2Integer(k,2);integer M=llList2Integer(k,3);if (ak<G+M){M=ak+-G;}l=llList2Vector(llGetLinkPrimitiveParams(1,(list)7),0);for(F=1;F<ak&(!az);++F){W=llGetLinkName(-~(ak+-F));if ("None,HScroll"==W){l=llList2Vector(llGetLinkPrimitiveParams(-~(ak+-F),(list)7),0);az=llRound(l.z*10000.);}}k=[];for(F=0;F<M;++F){W=llList2String(["Back","▁▁▁","▂▂▂","▃▃▃","▄▄▄","▅▅▅","▆▆▆","▇▇▇","███"],F+G);U=llList2Integer(r,G+F);d="#"+(string)(-~(F+G))+" "+W+"|12123424|"+(string)U;k=k+d;if (0<F&llList2Integer(A,~-F)==az){J=F;}}d=llDumpList2String(k,"|||");llMessageLinked(-4,B,llDumpList2String(["ITEMS","Set HUD vertical size",ak,G,0,12123424,J],"|"),d);k=[];d="";return;}if (U==51){U=llList2Integer(k,1);if (0<U&U<9){ak=llGetNumberOfPrims();for(F=1;F<ak&(!ap);++F){W=llGetLinkName(-~(ak+-F));if ("MenuItem:1"==W){k=llGetLinkPrimitiveParams(-~(ak+-F),aH);l=llList2Vector(k,0);x=llList2Vector(k,1)-llGetRootPosition();ap=llRound(x.z*10000.)+-llRound(l.z*10000.)/2;}}az=llList2Integer(A,~-U);ap=ap+-az/2;while(F<ak){W=llGetLinkName(-~(ak+-F));if ((~llSubStringIndex(W,"MenuItem"))|(~llSubStringIndex(W,"MenuText"))|W=="None,HScroll"){k=llGetLinkPrimitiveParams(-~(ak+-F),aH);l=llList2Vector(k,0);l.z=(float)az/10000.;x=llList2Vector(k,1)-llGetRootPosition();x.z=(float)ap/10000.;llSetLinkPrimitiveParamsFast(-~(ak+-F),[7,l,6,x]);ap=ap+-az;}++F;}llMessageLinked(-4,12123407,"2","");llMessageLinked(-4,12123408,"2","12123424");return;}llMessageLinked(-4,12123408,"2","12123412");}}
aR(){integer m=llList2Integer(k,0);integer ax=9;string aF;float j;vector ar;integer Q;integer aa=-1;if (m==103){integer as=llList2Integer(k,1);integer am=llList2Integer(k,2);integer H=llList2Integer(k,3);if (ax<as+H){H=ax+-as;}ar=llList2Vector(llGetLinkPrimitiveParams(1,(list)7),0);Q=llRound(ar.y*1000.);k=[];for(F=0;F<H;++F){aF=llList2String(["Back","▏","▎","▍","▌","▋","▊","▉","█"],F+as);m=llList2Integer(r,as+F);d="#"+(string)(-~(F+as))+" "+aF+"|12123425|"+(string)m;k=k+d;if (0<F&llList2Integer(af,~-F)==Q){aa=F;}}d=llDumpList2String(k,"|||");llMessageLinked(-4,am,llDumpList2String(["ITEMS","Set HUD width",ax,as,0,12123425,aa],"|"),d);k=[];d="";return;}if (m==51){m=llList2Integer(k,1);if (0<m&m<9){ax=llGetNumberOfPrims();j=llList2Float(af,~-m)/1000.;for(m=0;m<ax;++m){ar=llList2Vector(llGetLinkPrimitiveParams(-~m,(list)7),0);ar.y=j;llSetLinkPrimitiveParamsFast(-~m,[7,ar]);}llMessageLinked(-4,12123407,"2","");llMessageLinked(-4,12123408,"2","12123425");return;}llMessageLinked(-4,12123408,"2","12123412");}}
aN(){integer o=llList2Integer(k,0);integer X=llGetInventoryNumber(0);integer z=-1;string C;if (o==103){integer K=llList2Integer(k,1);integer at=llList2Integer(k,2);integer Z=llList2Integer(k,3);if (-~X<K+Z){Z=-~(X+-K);}k=(list)"Back|12123420|0";for(F=0;F<(~-Z);++F){C=llGetInventoryName(0,K+F)+"|12123420|"+(string)(-~(K+F));k=k+C;}C=llDumpList2String(k,"|||");llMessageLinked(-4,at,llDumpList2String(["ITEMS","Select theme texture",X,K,0,12123420],"|"),C);k=[];C="";return;}if (o==51){z=llList2Integer(k,1);if (0<z&(!(X<z))){C=llGetInventoryName(0,~-z);llMessageLinked(-4,12123408,"19",C);if (C=="~FS Theme Transparent"){ae=0;llMessageLinked(-4,12123408,"20",(string)ae);}}return;}}
aQ(){integer aE=llList2Integer(k,0);integer ay=-1;if (aE==103){integer aD=llList2Integer(k,2);integer aB;k=[];k=(list)"Back|12123432|0";for(F=0;F<19;++F){d="#"+(string)(-~F)+" "+(string)aB+"%|12123432|"+(string)(-~F);k=k+d;if (aB==ae){ay=-~F;}aB=5+aB;}d=llDumpList2String(k,"|||");llMessageLinked(-4,aD,llDumpList2String(["ITEMS","Set HUD Transparency",20,0,0,12123432,ay],"|"),d);k=[];d="";return;}if (aE==51){aE=llList2Integer(k,1);if (0<aE&aE<22){ae=(~-aE)*5;llMessageLinked(-4,12123408,"20",(string)ae);}llMessageLinked(-4,12123408,"2","12123412");}}
default{
state_entry(){au=305410561;an=au;}
changed(integer av){if (av&128)llResetScript();}
link_message(integer q,integer aq,string b,key V){k=llParseString2List(b,(list)"|",[]);if (12123412==aq){aO();return;}if (12123411==aq){aK(V);return;}if (12123416==aq){aT();return;}if (12123410==aq){aU();return;}if (12123424==aq){aL();return;}if (12123425==aq){aR();return;}if (12123420==aq){aN();return;}if (12123432==aq){aQ();return;}if ((!aq)&b=="RESET")llResetScript();}
}// lsl script: ~FSLists  optimized at:Thu Sep  5 21:04:51 2019
