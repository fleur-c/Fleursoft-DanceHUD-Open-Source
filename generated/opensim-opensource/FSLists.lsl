// This work is licensed under a Creative Commons Attribution 3.0 Unported License (http://creativecommons.org/licenses/by/3.0/)
integer R;string h="<none loaded>";integer C=30;integer b;integer aw;integer I;integer g;list Z;string d;integer Q;list aD=[0,1,2,3,4,5,6,7,8];list l=[144,158,172,186,200,214,228,242];list U=[184,214,246,276,308,338,370,400];list T=["No|","Yes|"];list az=["Off","On"];list ae=["0","1","2","3","4","5","6","7","8","9"];
aO(string M,list am){llMessageLinked(-4,12123405,M,llDumpList2String(am,"|"));}
integer as(integer a){return (R&a)==a;}
aL(integer G){R=R^G;}
aI(){integer ac=llList2Integer(Z,0);integer A;I=1;if (ac==103){integer V=llList2Integer(Z,2);A=0;if (as(1024)){A=1;if (as(2048)){A=2;}}Z=["#1 Back|12123412|0","#2 Sync|12123412|1","#3 Add dancers|12123412|2","#4 Remove dancers|12123412|3","#5 Change dancer groups|12123412|4","#6 Load notecard|12123412|5","#7 Set wait sequence menu|12123412|6","#8 Copy dances/delays|12123412|7","#9 Clear menu|12123412|8","#10 Set theme|12123412|9","#11 Set transparency|12123412|30","#12 Change HUD height|12123412|10","#13 Change HUD width|12123412|11","#14 Load all animations|12123412|27","#15 Reset|12123412|13","#16 Read Getting started|12123412|14","#17 Transfer|12123412|15","#18 Update|12123431|16"," |12123426|17","Settings (click to change):|12123426|17","#19 Dance selection:"+llList2String(["Manual|","All|","Random|"],A)+"12123412|18","#20 Default dance duration:"+llList2String(["N/A|",(string)C+"|",(string)C+"|"],A)+"12123412|19","#21 Missing dance warnings:"+llList2String(["On load notecard|","While dancing|"],as(64))+"12123412|20","#22 Keep blank lines:"+llList2String(T,as(128))+"12123412|21","#23 Keep comment lines:"+llList2String(T,as(256))+"12123412|22","#24 Repeat sequences:"+llList2String(["Enabled|","Disabled|"],as(512))+"12123412|23","#25 Freestyle recording:"+llList2String(["Off|","On (menu "+(string)(-305410560+aw)+")|"],as(16))+"12123412|24","#26 Time animations:"+llList2String(["Off|","On|"],as(32))+"12123412|25","#27 Active menu:"+(string)(-305410560+b)+"|12123412|26"];d=llDumpList2String(Z,"|||");llMessageLinked(-4,V,llDumpList2String(["ITEMS","Administrative Menu",-~-~llGetListLength(Z),0,0,12123412],"|"),d);Z=[];d="";return;}if (ac==51){ac=llList2Integer(Z,1);if (-1<ac&ac<31){if (!~-ac){llMessageLinked(-4,12123402,"4","");}if (ac==2){llMessageLinked(-4,12123408,"2","12123413");return;}if (ac==3){llMessageLinked(-4,12123408,"2","12123414");return;}if (ac==4){llMessageLinked(-4,12123408,"2","12123415");return;}if (ac==5){llMessageLinked(-4,12123408,"2","12123416");return;}if (ac==20){aL(64);llMessageLinked(-4,12123401,"MISSING|"+(string)as(64),"");llMessageLinked(-4,12123402,"6",(string)as(64));llMessageLinked(-4,12123408,"2","12123412");return;}if (ac==21){aL(128);llMessageLinked(-4,12123401,"BLANK|"+(string)as(128),"");llMessageLinked(-4,12123408,"2","12123412");return;}if (ac==22){aL(256);llMessageLinked(-4,12123401,"COMMENT|"+(string)as(256),"");llMessageLinked(-4,12123408,"2","12123412");return;}if (ac==23){aL(512);llMessageLinked(-4,12123402,"7",(string)as(512));llMessageLinked(-4,12123408,"2","12123412");return;}if (ac==18){A=0;if (as(1024)){A=1;if (as(2048)){A=2;}}++A;if (2<A){A=0;}if (A){if (~-A){aL(2048);}else{aL(1024);}}else{aL(1024);aL(2048);}llMessageLinked(-4,12123402,"8",(string)as(1024));llMessageLinked(-4,12123408,"15",(string)as(2048));llMessageLinked(-4,12123408,"2","12123412");return;}if (ac==19){llMessageLinked(-4,12123406,"2",((key)"DCMSG023"));return;}if (ac==7){llMessageLinked(-4,12123408,"2","12123422");return;}if (ac==10){llMessageLinked(-4,12123408,"2","12123424");return;}if (ac==11){llMessageLinked(-4,12123408,"2","12123425");return;}if (ac==8){llMessageLinked(-4,12123408,"2","12123417");return;}if (ac==25){aL(32);llMessageLinked(-4,303181825,"8",(string)as(32));llMessageLinked(-4,12123408,"2","12123412");return;}if (ac==24){aL(16);aw=b;llMessageLinked(-4,12123408,"4",(string)as(16));llMessageLinked(-4,12123408,"2","12123412");return;}if (ac==17){llMessageLinked(-4,12123408,"2","12123412");return;}if (ac==15){llMessageLinked(-4,12123408,"2","12123421");return;}if (ac==13){llMessageLinked(-4,0,"RESET","");return;}if (ac==9){llMessageLinked(-4,12123408,"2","12123420");return;}if (ac==30){llMessageLinked(-4,12123408,"2","12123432");return;}if (ac==6){llMessageLinked(-4,12123408,"2","12123418");return;}if (ac==26){llMessageLinked(-4,12123408,"2","12123427");return;}if (ac==27){llMessageLinked(-4,12123428,"6","");return;}if (ac==14){llGiveInventory(llGetOwner(),"~FS Readme - DanceHUD - Getting started");llMessageLinked(-4,12123408,"2","12123412");return;}}else{aO("DCMSG007",(list)llList2String(Z,1));}llMessageLinked(-4,12123408,"1","");return;}if (114==ac){C=llList2Integer(Z,1);llMessageLinked(-4,12123408,"2","12123412");return;}if (115==ac){b=llList2Integer(Z,1);return;}}
aJ(string j,integer J,integer E){string O;O="2|"+j+"|1|1|0|||3|3000|||20|||";llMessageLinked(-4,J,"SEQUENCE|"+j+"|"+(string)E,O);}
aP(string P){integer aA=llList2Integer(Z,0);integer r=llGetInventoryNumber(20);integer ad=-1;if (aA==103){integer n=llList2Integer(Z,1);integer ax=llList2Integer(Z,2);integer H=llList2Integer(Z,3);if ((!(r<n))&-1<n){if (r<n+H){H=r+-n;}Z=[];for(Q=0;Q<H;++Q){d="#"+(string)(-~(Q+n))+" "+llGetInventoryName(20,n+Q)+"|12123411|"+(string)(n+Q);Z=Z+d;}d=llDumpList2String(Z,"|||");llMessageLinked(-4,ax,llDumpList2String(["ITEMS","Inventory animations",r,n,1,12123411],"|"),d);Z=[];d="";}else{llMessageLinked(-4,ax,llDumpList2String(["ITEMS","Inventory animations",r,0,1,12123411],"|"),"");}return;}if (aA==51){ad=llList2Integer(Z,1);if (-1<ad&ad<r){aJ(llGetInventoryName(20,ad),12123402,12123411);return;}aO("DCMSG007",(list)llList2String(Z,1));llMessageLinked(-4,12123408,"2","12123411");return;}if (aA==52){d=llDumpList2String(llDeleteSubList(Z,0,0),"|");if (llGetSubString(d,0,0)=="#"){string Y;Y=llStringTrim(llGetSubString(d,1,-1),3);if (~llListFindList(ae,(list)llGetSubString(Y,0,0))){ad=~-(integer)Y;}}if (!~ad){if (20==llGetInventoryType(d)){for(aA=0;aA<r&(!~ad);++aA){if (llGetInventoryName(20,aA)==d){ad=aA;}}}}if (-1<ad&ad<r){aJ(llGetInventoryName(20,ad),12123402,12123411);return;}aO("DCMSG007",(list)d);llMessageLinked(-4,12123408,"2","12123411");}if (aA==113){Z=llParseString2List(P,(list)"|",[]);ad=llList2Integer(Z,1);if (llList2Integer(Z,0)){ad=(integer)llFrand(r);}else{++ad;}if (!(ad<r)){ad=0;}aJ(llGetInventoryName(20,ad),12123402,12123411);return;}}
aH(string i){if (llGetSubString(i,0,2)=="~FS"){aO("NCMSG033",(list)i);return;}if ("~"==llGetSubString(i,0,0)){llMessageLinked(-4,12123409,"ZHAO_LOAD|"+i,"");if (~-I){llMessageLinked(-4,12123408,"2","12123410");}else{llMessageLinked(-4,12123408,"2","12123412");}return;}llMessageLinked(-4,12123408,"5",i);llMessageLinked(-4,12123408,"2","12123412");}
aM(){integer t=llList2Integer(Z,0);integer c=llGetInventoryNumber(7);integer v=-1;if (t==103){integer ai=llList2Integer(Z,1);integer ak=llList2Integer(Z,2);integer L=llList2Integer(Z,3);if ((!(c<ai))&-1<ai){if (-~c<ai+L){L=-~(c+-ai);}Z=(list)("#"+(string)(-~ai)+" Back|12123416|0");for(Q=0;Q<(~-L);++Q){d="#"+(string)(-~-~(Q+ai))+" "+llGetInventoryName(7,ai+Q)+"|12123416|"+(string)(-~(ai+Q));Z=Z+d;}d=llDumpList2String(Z,"|||");llMessageLinked(-4,ak,llDumpList2String(["ITEMS","Load which notecard?",-~c,ai,0,12123416],"|"),d);Z=[];d="";}else{llMessageLinked(-4,ak,llDumpList2String(["ITEMS","Load which notecard?",-~c,0,0,12123416],"|"),"");}return;}if (t==51){v=llList2Integer(Z,1);if (-1<v&v<-~c){if (0<v){aH(llGetInventoryName(7,~-v));return;}}else{aO("DCMSG007",(list)llList2String(Z,1));}llMessageLinked(-4,12123408,"2","12123412");return;}if (t==52){d=llStringTrim(llDumpList2String(llDeleteSubList(Z,0,0),"|"),3);if (llToUpper(d)=="BACK"){llMessageLinked(-4,12123408,"2","12123412");return;}if (llGetSubString(d,0,0)=="#"){string aa;aa=llStringTrim(llGetSubString(d,1,-1),3);if (~llListFindList(ae,(list)llGetSubString(aa,0,0))){v=(integer)aa;}}if (!~v){if (7==llGetInventoryType(d)){for(t=0;t<c&(!~v);++t){if (llGetInventoryName(7,t)==d){v=t;}}}}if (-1<v&v<c){aH(llGetInventoryName(7,v));return;}else{aO("DCMSG007",(list)d);}llMessageLinked(-4,12123408,"2","12123412");}}
aN(){integer aC=llList2Integer(Z,0);string af;I=0;if (103==aC){integer aB=llList2Integer(Z,1);integer aE=llList2Integer(Z,2);integer x=llList2Integer(Z,3);if (aB<10&-1<aB){if (10<aB+x){x=10+-aB;}Z=[];for(Q=0;Q<x;++Q){af=llList2String(["AO:","Next stand","Stand order:","Sit:","Sit anywhere:","Stand:","Load Notecard","Select sit","Select walk","Select ground sit"],Q+aB);aC=llList2Integer([1,2,3,4,5,6,7,8,9,10],aB+Q);if (!~-aC){af=af+h;}if (aC==3){af=af+llList2String(["Sequential","Random"],as(2));}if (aC==4){af=af+llList2String(az,as(1));}if (aC==5){af=af+llList2String(az,as(4));}if (aC==6){af=af+llList2String(az,as(8));}d="#"+(string)(-~(Q+aB))+" "+af+"|12123410|"+(string)aC;Z=Z+d;}d=llDumpList2String(Z,"|||");llMessageLinked(-4,aE,llDumpList2String(["ITEMS","Animation Override Menu",10,aB,0,12123410],"|"),d);Z=[];d="";return;}else{llMessageLinked(-4,aE,"ITEMS|Animation Override Menu|10|0|0|12123410","");}}if (51==aC){aC=llList2Integer(Z,1);if (1<aC&aC<11){if (aC==2){llMessageLinked(-4,12123409,"ZHAO_NEXTSTAND","");}if (aC==3){aL(2);if (as(2)){llMessageLinked(-4,12123409,"ZHAO_RANDOMSTANDS","");}else{llMessageLinked(-4,12123409,"ZHAO_SEQUENTIALSTANDS","");}}if (aC==4){aL(1);if (as(1)){llMessageLinked(-4,12123409,"ZHAO_SITON","");}else{llMessageLinked(-4,12123409,"ZHAO_SITOFF","");}}if (aC==5){aL(5);if (as(4)){llMessageLinked(-4,12123409,"ZHAO_SITANYWHERE_ON","");}else{llMessageLinked(-4,12123409,"ZHAO_SITANYWHERE_OFF","");}}if (aC==6){aL(8);if (as(8)){llMessageLinked(-4,12123409,"ZHAO_STANDON","");}else{llMessageLinked(-4,12123409,"ZHAO_STANDOFF","");}}if (aC==7){llMessageLinked(-4,12123408,"2","12123416");return;}if (aC==8){llMessageLinked(-4,12123409,"ZHAO_SITS","");return;}if (aC==9){llMessageLinked(-4,12123409,"ZHAO_WALKS","");return;}if (aC==10){llMessageLinked(-4,12123409,"ZHAO_GROUNDSITS","");return;}}else{aO("DCMSG007",(list)llList2String(Z,1));}llMessageLinked(-4,12123408,"2","12123410");return;}if (112==aC){h=llList2String(Z,1);}}
aS(){integer X=llList2Integer(Z,0);integer ah=9;string y;vector an;vector N;integer z;integer D=-1;if (X==103){integer aG=llList2Integer(Z,1);integer B=llList2Integer(Z,2);integer ao=llList2Integer(Z,3);if (ah<aG+ao){ao=ah+-aG;}an=llList2Vector(llGetLinkPrimitiveParams(1,(list)7),0);for(Q=1;Q<ah&(!z);++Q){y=llGetLinkName(-~(ah+-Q));if ("None,HScroll"==y){an=llList2Vector(llGetLinkPrimitiveParams(-~(ah+-Q),(list)7),0);z=llRound(an.z*10000.);}}Z=[];for(Q=0;Q<ao;++Q){y=llList2String(["Back","▁▁▁","▂▂▂","▃▃▃","▄▄▄","▅▅▅","▆▆▆","▇▇▇","███"],Q+aG);X=llList2Integer(aD,aG+Q);d="#"+(string)(-~(Q+aG))+" "+y+"|12123424|"+(string)X;Z=Z+d;if (0<Q&llList2Integer(l,~-Q)==z){D=Q;}}d=llDumpList2String(Z,"|||");llMessageLinked(-4,B,llDumpList2String(["ITEMS","Set HUD vertical size",ah,aG,0,12123424,D],"|"),d);Z=[];d="";return;}if (X==51){X=llList2Integer(Z,1);if (0<X&X<9){ah=llGetNumberOfPrims();for(Q=1;Q<ah&(!z);++Q){y=llGetLinkName(-~(ah+-Q));if ("MenuItem:1"==y){Z=llGetLinkPrimitiveParams(-~(ah+-Q),(list)7);an=llList2Vector(Z,0);z=llRound(an.z*10000.);}}D=llListFindList(l,(list)z);if (!~D){llOwnerSay("Eeps - failed to find prim height of "+(string)z+" - something strange happened... can't resize vertically");return;}z=llList2Integer(l,~-X);D=-790+z/-2;Q=~-~-Q;while(Q<ah){y=llGetLinkName(-~(ah+-Q));if ((~llSubStringIndex(y,"MenuItem"))|(~llSubStringIndex(y,"MenuText"))|y=="None,HScroll"){Z=llGetLinkPrimitiveParams(-~(ah+-Q),[7,6]);an=llList2Vector(Z,0);an.z=(float)z/10000.;N=llList2Vector(Z,1);N.z=(float)D/10000.;N.y=0.;N.x=0.;llSetLinkPrimitiveParamsFast(-~(ah+-Q),[7,an,6,N]);D=D+-z;}++Q;}llMessageLinked(-4,12123407,"2","");llMessageLinked(-4,12123408,"2","12123424");return;}llMessageLinked(-4,12123408,"2","12123412");}}
aQ(){integer f=llList2Integer(Z,0);integer al=9;string ar;float u;vector ap;integer q;integer m=-1;if (f==103){integer W=llList2Integer(Z,1);integer w=llList2Integer(Z,2);integer ay=llList2Integer(Z,3);if (al<W+ay){ay=al+-W;}ap=llList2Vector(llGetLinkPrimitiveParams(1,(list)7),0);q=llRound(ap.y*1000.);Z=[];for(Q=0;Q<ay;++Q){ar=llList2String(["Back","▏","▎","▍","▌","▋","▊","▉","█"],Q+W);f=llList2Integer(aD,W+Q);d="#"+(string)(-~(Q+W))+" "+ar+"|12123425|"+(string)f;Z=Z+d;if (0<Q&llList2Integer(U,~-Q)==q){m=Q;}}d=llDumpList2String(Z,"|||");llMessageLinked(-4,w,llDumpList2String(["ITEMS","Set HUD width",al,W,0,12123425,m],"|"),d);Z=[];d="";return;}if (f==51){f=llList2Integer(Z,1);if (0<f&f<9){al=llGetNumberOfPrims();u=llList2Float(U,~-f)/1000.;for(f=0;f<al;++f){ap=llList2Vector(llGetLinkPrimitiveParams(-~f,(list)7),0);ap.y=u;llSetLinkPrimitiveParamsFast(-~f,[7,ap]);}llMessageLinked(-4,12123407,"2","");llMessageLinked(-4,12123408,"2","12123425");return;}llMessageLinked(-4,12123408,"2","12123412");}}
aR(){integer ag=llList2Integer(Z,0);integer o=llGetInventoryNumber(0);integer ab=-1;string av;if (ag==103){integer au=llList2Integer(Z,1);integer k=llList2Integer(Z,2);integer aq=llList2Integer(Z,3);if (-~o<au+aq){aq=-~(o+-au);}Z=(list)"Back|12123420|0";for(Q=0;Q<(~-aq);++Q){av=llGetInventoryName(0,au+Q)+"|12123420|"+(string)(-~(au+Q));Z=Z+av;}av=llDumpList2String(Z,"|||");llMessageLinked(-4,k,llDumpList2String(["ITEMS","Select theme texture",o,au,0,12123420],"|"),av);Z=[];av="";return;}if (ag==51){ab=llList2Integer(Z,1);if (0<ab&(!(o<ab))){av=llGetInventoryName(0,~-ab);llMessageLinked(-4,12123408,"19",av);if (av=="~FS Theme Transparent"){g=0;llMessageLinked(-4,12123408,"20",(string)g);}}return;}}
aK(){integer p=llList2Integer(Z,0);integer aF=-1;if (p==103){integer at=llList2Integer(Z,2);integer K;Z=[];Z=(list)"Back|12123432|0";for(Q=0;Q<19;++Q){d="#"+(string)(-~Q)+" "+(string)K+"%|12123432|"+(string)(-~Q);Z=Z+d;if (K==g){aF=-~Q;}K=5+K;}d=llDumpList2String(Z,"|||");llMessageLinked(-4,at,llDumpList2String(["ITEMS","Set HUD Transparency",20,0,0,12123432,aF],"|"),d);Z=[];d="";return;}if (p==51){p=llList2Integer(Z,1);if (0<p&p<22){g=(~-p)*5;llMessageLinked(-4,12123408,"20",(string)g);}llMessageLinked(-4,12123408,"2","12123412");}}
default{
state_entry(){b=305410561;aw=b;}
changed(integer F){if (F&128)llResetScript();}
link_message(integer aj,integer e,string S,key s){Z=llParseString2List(S,(list)"|",[]);if (12123412==e){aI();return;}if (12123411==e){aP(s);return;}if (12123416==e){aM();return;}if (12123410==e){aN();return;}if (12123424==e){aS();return;}if (12123425==e){aQ();return;}if (12123420==e){aR();return;}if (12123432==e){aK();return;}if ((!e)&S=="RESET")llResetScript();}
}// lsl script: ~FSLists  optimized at:Thu Sep  5 19:54:14 2019
